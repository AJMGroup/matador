#!/usr/bin/env python
from matador.similarity.pdf_similarity import PDF, PDFOverlap
from matador.utils.cell_utils import cart2volume

from sys import argv
from matador.scrapers.castep_scrapers import res2dict

strucs = []
print(argv[1:])
for res in argv[1:]:
    strucs.append(res2dict(res, db=False)[0])
    print(strucs[-1])

for i in range(len(strucs)):
    strucs[i]['cell_volume'] = cart2volume(strucs[i]['lattice_cart'])
    strucs[i]['pdf'] = PDF(strucs[i], dr=0.01, debug=True, verbosity=5)

strucs[0]['pdf'].plot_pdf(other_pdfs=[doc['pdf'] for doc in strucs[1:]])
